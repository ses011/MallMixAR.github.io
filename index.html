<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>AR.js Marker with Persistent Model</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.5/aframe/build/aframe-ar.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs>
        <!-- Marker element with persistent visibility -->
         <!-- The position="0 0 -2" makes porsche move 2 units away from marker -->
        <a-marker preset="hiro">
            <a-entity static-body keep-visible>
                <a-gltf-model id="porsche" 
                    src="https://ses011.github.io/MallMixAR.github.io/porsche/scene.gltf"
                    scale="1 1 1" 
                    position="0 2 -2"  
                    rotation="0 0 0" 
                    keep-visible
                    class="clickable">
                </a-gltf-model>
            </a-entity>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        AFRAME.registerComponent('keep-visible', {
            init: function () {
                var el = this.el;
                
                el.addEventListener('markerFound', function () {
                    console.log('Marker found! Car is visible.');
                    el.setAttribute('visible', true); // Show the model when marker is detected
                });

                el.addEventListener('markerLost', function () {
                    console.log('Marker lost! Keeping car visible.');
                    // Keep the model visible after losing the marker
                    el.setAttribute('visible', true); 
                });
            }
        });
    </script>
</body>
</html>

