<!-- Cleared out old index, starting from scratch -->
 <!--have marker found and marker lost event in script so when marker is lost have the car model still be at 
 that specific location away from the marker-->
 <!-- <!DOCTYPE html>
 <html>
 
 <head> -->
     <!-- A-Frame -->
     <!-- <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script> -->
     <!-- we use three.js to handle raycasting -->
     <!-- <script src="https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex.js"></script> -->
     <!-- AR.js A-Frame components -->
     <!-- <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
     <script>
         AFRAME.registerComponent('clicker', {
             init: function () {
                 this.soundEl = document.querySelector('#click-sound');
                 this.el.addEventListener('click', () => {
                     this.soundEl.components.sound.playSound();
                 });
             }
         });
     </script>
 </head>
 
 <body style='margin: 0; overflow: hidden;'>
     <a-scene embedded arjs vr-mode-ui='enabled: false'
         arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false' renderer='antialias: true; alpha: true'
         renderer='antialias: true; alpha: true' cursor='rayOrigin: mouse' raycaster="objects: .clickable">
         <a-marker>
             <a-entity gltf-model="https://ses011.github.io/MallMixAR.github.io/porsche/scene.gltf" scale="1 1 1"
                 rotation="-90 0 0" position="0 -8 0" clicker></a-entity>
         </a-marker>
         <a-entity id="click-sound"
             sound="src: https://ses011.github.io/MallMixAR.github.io/car-horn.mp3; autoplay: false"></a-entity>
         <a-camera><a-cursor></a-cursor></a-camera>
     </a-scene>
 </body>
 
 </html> -->

 <!DOCTYPE html>
<html>

<head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script>
        AFRAME.registerComponent('markerhandler', {
            init: function () {
                let marker = this.el;
                let model = document.querySelector('#car-model');

                marker.addEventListener('markerFound', () => {
                    console.log("Marker found! Showing model.");
                    model.setAttribute('visible', true);
                });

                marker.addEventListener('markerLost', () => {
                    console.log("Marker lost! Hiding model.");
                    model.setAttribute('visible', false);
                });
            }
        });

        AFRAME.registerComponent('clicker', {
            init: function () {
                this.soundEl = document.querySelector('#click-sound');
                this.el.addEventListener('click', () => {
                    this.soundEl.components.sound.playSound();
                });
            }
        });
    </script>
</head>

<body style='margin: 0; overflow: hidden;'>

    <a-scene embedded arjs vr-mode-ui="enabled: false"
        arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false"
        renderer="antialias: true; alpha: true" cursor="rayOrigin: mouse" raycaster="objects: .clickable">

        <!-- Adding a simple Hiro marker for testing -->
        <a-marker preset="hiro" markerhandler>
            <a-entity id="car-model" 
                gltf-model="https://ses011.github.io/MallMixAR.github.io/porsche/scene.gltf"
                scale="0.5 0.5 0.5" 
                rotation="-90 0 0" 
                position="0 0 0" 
                visible="false" 
                clicker>
            </a-entity>
        </a-marker>

        <a-entity id="click-sound"
            sound="src: https://ses011.github.io/MallMixAR.github.io/car-horn.mp3; autoplay: false"></a-entity>

        <a-camera></a-camera>

    </a-scene>

</body>

</html>
